<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Volume Calculator</title>
  <style>
    body {
      background-color: black;
      color: white;
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      margin: 0;
    }

    .container {
      text-align: center;
      height: 100vh;
    }

    input {
      background-color: transparent;
      border: 1px solid white;
      color: white;
      margin-bottom: 10px;
      padding: 5px;
    }

    button {
      background-color: black;
      border: 2px solid white;
      color: white;
      cursor: pointer;
      font-weight: bold;
      padding: 5px 10px;
    }

    button:hover {
      background-color: white;
      color: black;
    }

    .circle-image {
      position: relative;
      display: inline-block;
      width: 400px;
      height: 400px;
      overflow: hidden;
      border-radius: 50%;
    }

    .circle-image img {
      position: absolute;
      top: -15%;
      left: -15%;
      width: 130%;
      height: auto;
      filter: blur(0px);
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="circle-image">
      <img src="/img/cone-spin.gif" alt="Spinning Shape">
    </div>
    <p>Cone dimensions:</p>
    <label for="cone_height">Height:</label><br>
    <input type="number" id="cone_height" required>
    <br>
    <label for="cone_radius">Radius:</label><br>
    <input type="number" id="cone_radius" required>
    <br><br>
    <p>Cylinder dimensions:</p>
    <label for="cylinder_radius">Radius:</label><br>
    <input type="number" id="cylinder_radius" required>
    <br><br>
    <button onclick="calculateVolume()">Calculate Volume</button>
    <p id="result"></p>
  </div>

  <script>
    function calculateVolume() {
      const coneHeight = parseFloat(document.getElementById('cone_height').value);
      const coneRadius = parseFloat(document.getElementById('cone_radius').value);
      const cylinderRadius = parseFloat(document.getElementById('cylinder_radius').value);
      const cylinderHeight = coneHeight;

      if (cylinderRadius >= coneRadius - 1) {
        document.getElementById('result').innerText = 'The cylinder radius needs to be smaller than the cone radius for this to work.';
        return;
      }

      const coneVolume = (1 / 3) * Math.PI * Math.pow(coneRadius, 2) * coneHeight;
      const slantHeight = Math.sqrt(Math.pow(coneRadius, 2) + Math.pow(coneHeight, 2));
      const angleB = Math.acos(coneHeight / slantHeight);
      const angleA = Math.PI - Math.PI / 2 - angleB;
      const sideA = coneRadius - cylinderRadius;
      const sideB = sideA * Math.sin(angleB) / Math.sin(angleA);
      const topConeHeight = coneHeight - sideB;
      const topConeVolume = (1 / 3) * Math.PI * Math.pow(cylinderRadius, 2) * topConeHeight;
      const choppedConeVolume = coneVolume - topConeVolume;
      const cylinderVolume = Math.PI * Math.pow(cylinderRadius, 2) * sideB;
      const tubeConeVolume = choppedConeVolume - cylinderVolume;

      document.getElementById('result').innerText = `Volume = ${tubeConeVolume.toFixed(2)} mm^3`;
    }
  </script>
</body>
</html>